(function(e){"use strict";e.fn.customSelectMenu=function(t){function r(e,t){var r=e.attr("data-option-value"),i=e.text();e.parent().find("."+n.selectedClass).removeClass(n.selectedClass);e.addClass(n.selectedClass);t.val(r).change();e.parent().parent().find("label").text(i);if(t.val()!==""){e.parent().parent().find("label").addClass(n.selectionMadeClass)}else{e.parent().parent().find("label").removeClass(n.selectionMadeClass)}e.parent().hide();if(e.parent().css("display")!=="none"){e.parent().parent().find("label").toggleClass(n.openedClass)}else{e.parent().parent().find("label").removeClass(n.openedClass)}}var n=e.extend(e(this).data(),t);n=e.extend({menuClass:"custom-select-menu",openedClass:"opened",selectedClass:"selected",selectionMadeClass:"selection-made"},n);return this.each(function(){var t=e(this),i=t.attr("name"),s=t.attr("id"),o,u,a,f,l,c,h,p;t.hide();u=e('<div class="'+n.menuClass+'">').attr("tabindex",0);if(s){u.attr("id",s);t.removeAttr("id")}o=t;if(t.find(":selected")){h=t.find(":selected");p=h.attr("value");f=h.text();if(!p){a=e("<label>"+f+"</label>")}else{a=e('<label class="'+n.selectionMadeClass+'">'+f+"</label>")}}else{f=t.find(":first").text();a=e("<label>"+f+"</label>")}l=e('<ul data-select-name="'+i+'">').hide();t.after(u.append(a,l));t.find("option").each(function(){var t=e(this).text(),r=e(this).attr("value"),i=t===f?' class="'+n.selectedClass+'"':"";if(!r){c=e("<li"+i+">"+t+"</li>")}else{c=e('<li data-option-value="'+r+'"'+i+">"+t+"</li>")}l.append(c)});u.on("click",function(i){var s=e(i.target);if(s.is("label")){a.toggleClass(n.openedClass);a.parent().find("ul").toggle()}if(s.is("li")){r(s,t)}});u.on("keyup",function(i){if(i.keyCode===38||i.keyCode===40){e(this).find(a).addClass(n.openedClass);e(this).find(l).show()}var s=e(this).find("li"),o=e(this).find("."+n.selectedClass),u="",f="";if(i.keyCode===40){o.removeClass(n.selectedClass);u=o.next();if(u.length>0){u.addClass(n.selectedClass)}else{s.first().addClass(n.selectedClass)}}if(i.keyCode===38){o.removeClass(n.selectedClass);f=o.prev();if(f.length>0){f.addClass(n.selectedClass)}else{s.last().addClass(n.selectedClass)}}if(i.keyCode===13){r(e(this).find("."+n.selectedClass),t)}});u.on("blur",function(){if(e(this).find(l).is(":visible")){e(this).find(a).removeClass(n.openedClass);e(this).find(l).hide()}});e("html").on("keyup",function(e){if(e.keyCode===27){a.removeClass(n.openedClass);l.hide()}});e("html").on("mousedown",function(t){var r=e(t.target);if(!r.parents().addBack().is("."+n.menuClass+" ul, ."+n.menuClass+" label")){e("."+n.menuClass+" label").removeClass(n.openedClass);e("."+n.menuClass+" ul").hide()}})})}})(jQuery)
